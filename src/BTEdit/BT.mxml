<?xml version="1.0" encoding="utf-8"?>
<s:Scroller xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="100%" creationComplete="onCreate()">
	<fx:Script>
		<![CDATA[
			private var mCreated:Boolean = false;
			private var mData:Object;
			private var mName:String;
			private var mPanel:BTPanel;
			
			private function onCreate():void {
				this.mCreated = true;
				
				if (this.mData) {
					this.updateTree();
				}
			}
			
			public function setData(name:String, data:Object, panel:BTPanel):void {
				this.mData = data;
				this.mName = name;
				this.mPanel = panel;
				
				if (this.mCreated) {
					this.updateTree();
				}
			}
			
			private function updateTree():void {
				var node:BTNode = new BTNode();
				node.setData(BTNode.TYPE_ROOT, this.mName, this.mData[0], this, null);
				this.addNodeToCanvas(node);
				this.mContainer.width = 2000;
				this.mContainer.height = 2000;
			}
			
			public function addNodeToCanvas(node:BTNode):void {
				if (!this.mContainer.contains(node)) {
					this.mContainer.addElement(node);
					node.x = node.nodeDepth*300;
					node.y = node.siblingIndex*200;
				}
			}
			
			public function removeNodeFromCanvas(node:BTNode):void {
				if (this.mContainer.contains(node)) {
					this.mContainer.removeElement(node);
				}
			}
			
			public function setModified(bool:Boolean):void {
				this.mPanel.setTabModified(this.mName, bool);
			}
			
			public function rename(to:String):void {
				this.mName = to;
			}
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- 将非可视元素（例如服务、值对象）放在此处 -->
	</fx:Declarations>
	<s:Group>
		<s:Group id="mContainer" x="0" y="0" width="500" height="600">
		</s:Group>
	</s:Group>
</s:Scroller>
